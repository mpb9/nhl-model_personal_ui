<div class="col-md-12 upload-page">
  <div class="col-md-3 my-fit pad-0" style="min-height: 80vh; background-color: black; border: 4px solid rgb(153, 196, 103); padding-bottom: 10px; text-align: left; font-size: 145%;">
    <div class="btn-group" style="width: 100%; border: 5px solid rgb(153, 196, 103);" appDropdown>
      <button class="upload-header-btn dropdown-toggle" type="button" style="padding: 5px 9px; width: 100%; font-size: 100%;" (click)="showDiagnostics = !showDiagnostics">
        DIAGNOSTICS
        <span class="my-caret" style="color: black;"></span>
      </button>
      <ul class="list-of-diagnostics" *ngIf="showDiagnostics" style="width: 100%;">
        <li><b>{{numPages}}</b> pages</li>
        <li><b>{{numRows}}</b> rows</li>
        <li><b>{{numCols}}</b> cols</li>
        <li>All Columns Same? <b>{{allColsSame}}</b></li>
      </ul>
    </div>
    <div class="row my-fit pad-10" style="text-decoration: underline; font-size: 90%; color: rgb(153, 196, 103);">
      ALTER SQL TABLE
    </div>
    <div class="row my-fit" style="padding-left: 20px; text-align: left;">
      <div class="row my-fit" style="padding-bottom: 15px;">
        <a class="option-btn" type="button" *ngIf="!usingScraperColumns" (click)="useScraperColumns()">USE SCRAPED COLUMNS</a>
        <a class="option-btn" type="button" *ngIf="usingScraperColumns" (click)="useSQLColumns()">USE SQL COLUMNS</a>

      </div>
      <div class="row my-fit" style="padding-bottom: 15px;">
        <a class="option-btn" type="button" *ngIf="rawScrape.headers.length > sqlColumns.length">ADD BLANK COLUMNS</a>
      </div>
    </div>
    <div class="row my-fit pad-10" style="text-decoration: underline; font-size: 90%; color: rgb(153, 196, 103);">
      ALTER SCRAPED DATA
    </div>
    <div class="row my-fit" style="padding-left: 20px; text-align: left;">
      <div class="row my-fit" style="padding-bottom: 15px;">
        <a class="option-btn" type="button" *ngIf="swappingCols[0] == -1" (click)="prep_swappingCols()">SWAP COLUMNS</a>
        <a class="cancel-option-btn" type="button" *ngIf="swappingCols[0] != -1" (click)="cancelAlteration()">NVM!</a>
      </div>
      <div class="row my-fit" style="padding-bottom: 15px;">
        <a class="option-btn" type="button" *ngIf="movingCol[0] == -1" (click)="prep_movingCol()">MOVE COLUMN</a>
        <a class="cancel-option-btn" type="button" *ngIf="movingCol[0] != -1" (click)="cancelAlteration()">NVM!</a>
      </div>
      <div class="row my-fit" style="padding-bottom: 15px;">
        <a class="option-btn" type="button" *ngIf="!deletingCol" (click)="prep_deletingCol()">DELETE COLUMN</a>
        <a class="cancel-option-btn" type="button" *ngIf="deletingCol" (click)="cancelAlteration()">NVM!</a>
      </div>
      <div class="row my-fit">
        <a class="option-btn" type="button" *ngIf="!deletingRow"  (click)="prep_deletingRow()">DELETE ROW</a>
        <a class="cancel-option-btn" type="button" *ngIf="deletingRow" (click)="cancelAlteration()">NVM!</a>
      </div>
    </div>
  </div>
  <div class="col-md-9 my-fit pad-0">
    <div class="row my-fill-1 my-fit" style="padding: 5px 0px; background-image: linear-gradient(to bottom, rgb(0 0 0), #a6e7a8);">
      <div class="col-md-4">
      </div>
      <div class="col-md-4">
        <div class="btn-group" style="width: 100%;" appDropdown>
          <button class="upload-header-btn dropdown-toggle" type="button" (click)="showSQLOptions = !showSQLOptions"
            style="padding: 5px; width: 100%; font-size: 150%; text-shadow: -1px -1px 1px lightgreen, 0 0 0.2em rgba(145, 204, 73, 0.75), 0 0 0.2em rgba(0, 0, 0, 0);">
            SQL Actions
            <span class="my-caret" style="color: black;"></span>
          </button>
          <ul class="sql-options" *ngIf="showSQLOptions" style="width: 100%;">
            <li>
              <a type="button">Insert</a>
            </li>
            <li>
              <a type="button">Add Columns</a>
            </li>
            <li>
              <a type="button" (click)="initializeSQLTable()">Initialize Table</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-md-4" style="text-align: right; padding-right: 0px; padding-left: 0px; padding-top: 4px;">
        <a class="exit-upload-btn" type="button" style="font-size: 150%; padding: 5px 20px;" 
          href="http://localhost:4200/scraper">bye bye</a>
      </div>
    </div>
    <div class="sql-response-container" *ngIf="showSQLResponse">
      <div class="row my-fit pad-10" style="text-align: center; font-size: 120%;" *ngIf="!sqlResponseCopied">
        <a class="copy-sql-response" type="button" (click)="copySQLResponse()">COPY</a>
        <a class="copy-sql-response" type="button" (click)="closeSQLResponse()">done</a>
      </div>
      <div class="row my-fit pad-10" style="text-align: center; color: white; font-weight: 900; font-size: 120%;" 
        *ngIf="sqlResponseCopied" (click)="sqlResponseCopied = false">
        COPIED!
        <a class="copy-sql-response" type="button" (click)="closeSQLResponse()">done</a>
      </div>
      <div class="sql-response">
        {{sqlResponse}}
      </div>
    </div>
    <div class="row my-fit" style="padding-top: 5px; padding-bottom: 50px;">
      <div class="row my-fit" style="padding-left: 15px; font-size: 125%;">
        <b>SQL Table: </b>{{query.table.name}}... ({{query.table.columns.length}} cols)
      </div>
      <div class="row my-fit sql-table">
        <table>
          <tr>
            <th class="sql-table-cols" *ngFor="let col of sqlColumns; let i=index">
              <div class="row my-fit" style="font-weight: 100; font-size: 100%; height: 20px; background-color: rgba(0, 0, 0, 0.6);">
                {{i+1}}
              </div>
              <div class="row my-fit" style="font-weight: 100; font-size: 100%;">
                <b>{{col.name}}</b>
                <p style="padding: 0px; margin: 0px;">
                  <input class="page-input" type="text" style="padding: 3px; width: 100%; background-color: transparent;" 
                    placeholder="type" (change)="changeType($event, i)" [value]="(col.type)">
                </p>
              </div>
            </th>
          </tr>
        </table>      
      </div>
      <div class="row my-fit" style="padding-left: 15px; font-size: 125%;">
        <b>Scraped Data</b> (pg.<input class="page-input" type="text" placeholder="#" (change)="changePage($event)"
        [value]="(pageNumber+1)"> of {{numPages}})
      </div>
      <div class="row my-fit scraped-table">
        <table>
          <tr>
            <th class="scraped-table-cols" *ngFor="let header of rawScrape.headers; let i=index" (click)="handleColumnClick(i)"
              [ngClass]="{
                deletingColsCSS: deletingCol, 
                swappingColsCSS: (swappingCols[0] + movingCol[0]) != -2, 
                selectedForSwapCSS: swappingCols[1] == i || movingCol[1] == i
              }" >
              <div class="row my-fit" style="font-weight: 100; font-size: 100%; height: 20px; background-color: rgba(0, 0, 0, 0.6); margin-top: 0px;">
                {{i+1}}
              </div>
              <div class="row my-fit" style="font-weight: 100; font-size: 90%; width: max-content; min-width: 100px;">
                <b>{{header}}</b>
                <p style="padding: 0px; margin: 0px;">
                </p>
              </div>
            </th>
          </tr>
          <tr *ngFor="let row of rawScrape.data[pageNumber]; let i=index" [ngClass]="{deletingRowsCSS: deletingRow}">
            <td class="scraped-table-data" *ngFor="let cell of row;" (click)="handleRowClick(i)">
              {{cell}}
            </td>
          </tr>
        </table>      
      </div>
    </div>
  </div>
  
  <div class="row my-fit">
   
  </div>
</div>